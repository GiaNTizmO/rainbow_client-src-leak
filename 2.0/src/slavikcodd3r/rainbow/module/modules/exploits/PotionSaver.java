package slavikcodd3r.rainbow.module.modules.exploits;

import java.util.Iterator;

import net.minecraft.client.Minecraft;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.potion.PotionEffect;
import slavikcodd3r.rainbow.event.EventTarget;
import slavikcodd3r.rainbow.event.MouseEvent;
import slavikcodd3r.rainbow.event.events.PacketSendEvent;
import slavikcodd3r.rainbow.event.events.TickEvent;
import slavikcodd3r.rainbow.event.events.UpdateEvent;
import slavikcodd3r.rainbow.module.Module;
import slavikcodd3r.rainbow.option.OptionManager;
import slavikcodd3r.rainbow.utils.ClientUtils;

@Module.Mod(displayName = "PotionSaver")
public class PotionSaver extends Module
{   
	Minecraft mc = Minecraft.getMinecraft();
	
    @EventTarget
    public void onPacketRecieve(final PacketSendEvent event) {
		if (!mc.thePlayer.isMoving()) {
    	if (event.getPacket() instanceof C03PacketPlayer) {
    		event.setCancelled(true);
    	}
		}
    }
    
	@EventTarget
    private void onUpdate(final UpdateEvent event) {
		if (!mc.thePlayer.isMoving()) {
		  Iterator var3 = this.mc.thePlayer.getActivePotionEffects().iterator();

	         while(var3.hasNext()) {
	            PotionEffect effect = (PotionEffect)var3.next();
	            effect.incrementDuration();
	         }
		}
	}

	
	   public static boolean savePotion() {
	      return !Minecraft.getMinecraft().thePlayer.getActivePotionEffects().isEmpty();
	   }
	}